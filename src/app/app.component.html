<div>
  <h1>Async worker validator demo</h1>
  <code>
    {{errors | json}}
  </code>
  <form novalidate>
    <div class="controls">
      <button type="button" (click)="addUser()">add</button>
    </div>
    <ul>
      <li>
        <span>name</span>
        <span>days</span>
        <span>age</span>
      </li>
      <ng-container *ngFor="let rule of rulesControls; index as i">
        <li [ngClass]="{
          'age-error': rule.get('age').hasError('max')
        }">
          <input type="text" [formControl]="rule.get('name')">
          <input [class.prev-error]="getError(i)" type="text" [formControl]="rule.get('days')">
          <input type="number" [formControl]="rule.get('age')">
          <button type="button" (click)="addUser(i)">add</button>
          <button type="button" (click)="removeUser(i)">remove</button>
        </li>
      </ng-container>
    </ul>
  </form>
</div>
